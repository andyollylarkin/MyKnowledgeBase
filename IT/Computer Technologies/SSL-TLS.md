---
aliases: [x509, x.509, ssl, tls, ]
tags: [network, cipher, http, secutiry, encryption]
---
# SSL-TLS
<h6>13-03-2022</h6>
----------
## Определение
Протоколы безопасной передачи данных по не безопасной сети, обеспечивающие
1. Приватность
2. Целостность
3. Аутентификацию
> Актуальные версии протоколов TLS 1.2, TLS 1.3
> SSL используется как название для OpenSSL, LibreSSL
## Описание

## Тесно связанные с браузером технологии и протоколы
1. [HSTS](https://ru.wikipedia.org/wiki/HSTS) - механизм принудительной активации HTTPS соединения. Реализован на стороне веб сервера посредством установки заголовка **Strict-Transport-Security**
2. Certificate Pinning - хранение списка разрешенных для домена сертификатов или CA в исходных текста (скорее всего в настройках, конфигах) браузера.

## Выделенные под протокол порты
 - HTTPS - 443 порт


## Шифрование в SSL/TLS
см. [[Виды шифрования]]

В SSL/TLS используется гибридный механизм шифрования.

[[Виды шифрования#Ассиметричное шифрование|Ассиметричное шифрование]] для передачи ключа симметричного шифрования.
[[Виды шифрования#Симметричное шифрование|Симметричное шифрование]] для шифрование для передачи данных.

## Расширения файлов
- .pem - сертификат
- .crt - тоже
- .cer - тоже
>Все расширения равнозначны
- .key  - закрытый или открытый ключ
- .csr  - запрос на подпись


## Сертификаты электронной подписи
> Используемый формат сертификата [x.509](https://ru.wikipedia.org/wiki/X.509)

### Что входит в сертификат
- Сертификат
	- Версия
	- Серийный номер
	- Идентификатор алгоритма подписи
	- Имя издателя
	- Период действия
		- Не ранее
		- Не позднее
	- Имя субьекта
	- Информация об открытом ключе
		- Алгоритм ключа
		- Открытый ключ
	- UUID издателя
	- UUID субьекта
	- Алгоритм подписи сертификата
	- Подпись сертификата

## Что такое сертификат
Сертификат по сути является парой - публичный ключ/приватный ключ.
- Публичный ключ это файл с расширением (pem,crt) плюс информация о домене и другая сопутствующая информация.
- Приватный ключ это файл с расширением (key).

## Запрос на подпись
Любой может сгенерировать пару ключей, но встает вопрос о доверии к этой паре третьей стороной. Как проверить, что публичный ключ действительно выпущен определенным лицом?
Для этого как раз и существуют **CA**. CA подписывает своим ключом наш ключ и ключ вместе с информацией о домене упаковывается в сертификат.

В результате процедура создания сертификата выглядит следующим образом:
1. Владелец сайта генерирует пару публичный ключ/приватный ключ
2. Публичный ключ вместе с информацией о домене упаковывается в файл в специальном формате (**csr**). Это запрос на подпись центром сертификации.
3. Данный запрос на подпись отправляется в центр сертификации, который используя свой приватный корневой ключ создает подпись для нашего сертификата и все это упаковывается как раз в сертификат.
В результате получается сертификат который имеет следующие свойства:
1. Он может зашифровать данные (в нем есть публичный ключ), которые способен расшифровать только приватный ключ составляющий ему пару (тот приватный ключ .key который мы сгенерировали на первом шаге).
2. Сертификат может быть проверен на подлинность с помощью сертификата **CA**, т.к. создана цепочка доверия. Клиент доверяет сертификату CA поскольку он включен в доверенные сертификаты ОС или браузера, а сам CA доверяет нам поскольку подписал наш сертификат.

## Инфраструктура открытый ключей
%%TODO%%
Распространяет электронные сертификаты которые помимо открытых ключей сервера содержат так же доп. информацию.
Формат сертификата x.509



## Наборы шифров
- Алгоритм цифровой подписи в сертификате
  - [[Алгоритмы шифрования#RSA|RSA]]
  - [[Алгоритмы шифрования#DSA|DSA]]
- Алгоритм обмена ключами
  - [[Алгоритмы шифрования#RSA|RSA]]
  - [[Алгоритмы шифрования#Diffie-Helman|Diffie-Helman]]
- Алгоритм симметричного шифрования
   - [[Алгоритмы шифрования#AES|AES]]
   - [[Алгоритмы шифрования#3DES|3DES]]
- Хеш-функция для вычисления MAC:
  - [[Хеш функция#MD5|MD5]]
  - [[Хеш функция#Семейство SHA|Семейство SHA]]

---
## Библиография
- Курс лекция на YouTube от Андрея Созыкина по протоколам SSL/TLS
- [Добавление корневых сертификатов в Linux](https://winitpro.ru/index.php/2022/09/28/ustanovit-kornevoj-doverennyj-sertifikat-ca-linux/)
- [Хабр статья об SSL](https://habr.com/ru/company/1cloud/blog/326292/)
- [Полезное по работе с OpenSSL утилитой](https://hackware.ru/?p=12982#10)
