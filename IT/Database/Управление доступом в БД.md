---
aliases: [GRANT, REVOKE, db roles, роли, rbac, RBAC]
tags: [db, database, db_roles, grant, revoke]
---
# Управление доступом в БД
<h6>03-04-2022</h6>
----------
## Определение
Механизм аутентификакции, авторизации и идентификакции с [[СУБД]]

## Описание
> <span style='color: red'>Далее роли в СУБД рассматриваются с точки зрения СУБД PostgreSQL</span>

### Роль
Пользователь [[СУБД]]. Может включать в себя другие роли. По сути в postgres нет понятия "*Пользователь*", а есть только роли.

> Роль является общей на весь [[СУБД#Кластер СУБД|кластер]] [[СУБД]]

## Команды управления ролями
1. [GRANT](https://postgrespro.ru/docs/postgrespro/13/sql-grant) - предоставление
2. [REVOKE](https://postgrespro.ru/docs/postgrespro/13/sql-revoke) - отзыв

## Атрибуты
Атрибуты определяют свойства роли. 
```sql
CREATE ROLE <role name> [WITH] <attr> [<attrs>]
```
- LOGIN - возможность подключения
- SUPERUSER - суперпользователь
- CREATEDB - возможность создавать БД
- CREATEROLE - возможность создавать роли
- REPLACATION - использование протокола репликации
- etc
> Обычно атрибуты имеют 2 формы:
> SOME | \[**NO**\]SOME
> Включение атрибуты или отключение атрибута

## Включение роли в группу
![[Pasted image 20220403123426.png]]
Роль может быть включена в другую роль подобно тому, как [[Пользователи и группы#Пользователи|пользователь]] [[UNIX]] может быть включен в [[Пользователи и группы#Группы|группу]]. 
При включении роли в группу, роли становятся доступны атрибуты и привилегии группы.
Правом на включение и исключение других ролей из группы обладают:
- Сама роль
- Роль с атрибутом SUPERUSER
- Роль с атрибутом CREATEROLE (если это не супер пользователь)

При включении роли в группу можно передать ей право управления текущей группой (включение и исключение других ролей)
```sql
GRANT <role> TO <another_role> WITH ADMIN OPTION;
-- обратить это право можно:
REVOKE ADMIN OPTION FOR <role> -- не исключая роль из группы
```



---
## Библиография
- [Курс от PostgresPRO](https://edu.postgrespro.ru/dba1/dba1_13_access_roles.pdf)
