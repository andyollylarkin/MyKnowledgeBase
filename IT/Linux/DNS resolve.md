---
aliases: [nsswitch, dns resolve, nslookup, nameservice, nss, nsswitch, getaddrinfo, resolve.conf]
tags: [linux, dns, networking, network]
---
# DNS resolve
<h6>03-10-2022</h6>
----------
## Определение
>В [[glibc]] есть семейство функций _getaddrinfo_ для определения адреса.

При резолве адресов нужно понимать очередность того, откуда будут браться значения, их несколько:
- внутреняя БД
- /etc/hosts
- запрос к DNS серверу
> За конфигурацию очередности отвечает [[NSS]] (в частности настройки в файле *nsswitch.conf*)

>[[DNS]] не единственный сервис настраиваемый посредством [[NSS]], так же через [[NSS]] предоставляется конфигурация поиска пользователей и групп

Поиск в базах производится в том порядке, в которым они обьявлены в *nsswitch.conf*

> Если к примеру обьявить, что сперва нужно искать в [[DNS]], а потом files и в /etc/hosts направить искомый адрес на 127.0.0.1 , адрес все равно отрезолвится как правильный, потому что поиск собственно сначала будет через [[DNS]] сервер.

Далее если резолв был выбран через [[DNS]], то будет прочитан файл */etc/resolv.conf* для определения nameserver (т.е. к какому [[DNS]] обращаться для резолва имени в адрес).


---
## Библиография
- [Как работает резолв DNS в Linux](https://habr.com/ru/post/352300/)
- man 5 nsswitch.conf, man getaddrinfo
